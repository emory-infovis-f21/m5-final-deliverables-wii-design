{"ast":null,"code":"var _jsxFileName = \"/home/Panda21/Documents/Emory/2021 - 2022/CS 485/m4-search/m4-status-update-wii-design/src/components/scatterplot.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from \"react\";\nimport * as d3 from 'd3';\nimport { legendColor } from \"d3-svg-legend\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Scatterplot = () => {\n  _s();\n\n  const svgRef = useRef();\n  const [data, setData] = useState([]);\n  const cat = useRef('Title');\n  const num = useRef('Metrics.Review Score');\n  const optX = [{\n    value: 'Title',\n    label: 'Title'\n  }, {\n    value: 'Release.Console',\n    label: 'Console'\n  }, {\n    value: 'Metadata.Publishers',\n    label: 'Publishers'\n  }, {\n    value: 'Release.Rating',\n    label: 'Rating'\n  }, {\n    value: 'Metadata.Genres',\n    label: 'Genres'\n  }];\n  const optY = [{\n    value: 'Metrics.Review Score',\n    label: 'Review Score'\n  }, {\n    value: 'Metrics.Sales',\n    label: 'Sales'\n  }, {\n    value: 'Metrics.Used Price',\n    label: 'Used Price'\n  }, {\n    value: 'Length.All PlayStyles.Median',\n    label: 'Median All Playstyles Play Time'\n  }, {\n    value: 'Length.Completionists.Median',\n    label: 'Median Completionist Play Time'\n  }];\n  const selectionStyle = {\n    display: 'flex',\n    margin: '20px'\n  };\n  useEffect(() => {\n    d3.csv(\"/data/video_games.csv\").then(data => {\n      setData(data);\n      console.log(data);\n    });\n  }, []);\n  useEffect(() => {\n    let labelX = '';\n    let labelY = ''; //set up color\n\n    const color = d3.scaleSequential(d3.interpolateViridis).domain([0, d3.max(data, function (d) {\n      return d[num.current];\n    })]); //set up container\n\n    const w = 800;\n    const h = 400;\n    const margin = {\n      top: 20,\n      right: 20,\n      bottom: 30,\n      left: 40\n    };\n    const svg = d3.select(svgRef.current).attr('width', w).attr('height', h).style('overflow', 'visible').style('margin-top', '10px').style('margin-bottom', '50px').append('g'); //set options\n\n    d3.select('#x-cat').selectAll('option').data(optX).join('option').text(function (d) {\n      return d.label;\n    }).attr('value', function (d) {\n      return d.value;\n    }).attr('label', function (d) {\n      return d.label;\n    });\n    d3.select('#y-cat').selectAll('option').data(optY).join('option').text(function (d) {\n      return d.label;\n    }).attr('value', function (d) {\n      return d.value;\n    }).attr('label', function (d) {\n      return d.label;\n    }); //setting scales\n\n    const yScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n      return d[num.current];\n    })]).range([h, 0]);\n    const xScale = d3.scalePoint().domain(data.map(function (d) {\n      return d[cat.current];\n    })).range([0, w]); //set up legend\n\n    const legend = legendColor().shapeWidth(30).scale(color);\n    d3.selectAll('#legend').attr('transform', 'translate(' + (w + 30) + ',0)').call(legend); //set up zoom\n\n    const zoom = d3.zoom().scaleExtent([-5, 50]).extent([[0, 0], [w, h]]).on('zoom', zoomed); // rescaling\n\n    function zoomed(e) {\n      const newY = e.transform.rescaleY(yScale);\n      const newX = xScale.range([margin.left, w - margin.right].map(d => e.transform.applyX(d)));\n      yAxis.call(d3.axisLeft(newY));\n      circle.selectAll('circle').attr('cy', function (d) {\n        return newY(d[num.current]);\n      }).attr('cx', function (d) {\n        return newX(d[cat.current]);\n      });\n    } //clipPath - nothing draw outside the area\n\n\n    svg.append('defs').append('svg:clipPath').attr(\"id\", \"clip\").append('svg:rect').attr('width', w).attr('height', h).attr('x', 0).attr('y', 0); //invisible rect on top of the chart to recover pointer events\n\n    svg.append('rect').attr('width', w).attr('height', h).style('fill', 'none').style('pointer-events', 'all').call(zoom); //set up axes\n\n    d3.select('#x-axis').attr('transform', `translate(0, ${h})`).call(d3.axisBottom(xScale).tickValues([]));\n    const yAxis = d3.select('#y-axis').call(d3.axisLeft(yScale)); //set label\n\n    svg.append('text').attr('id', 'x-label').attr('x', w / 2).attr('y', h + 50).text('Title');\n    svg.append('text').attr('id', 'y-label').attr('y', h / 2).attr('x', -300).text('Review Score'); //set up tooltip\n\n    const tooldiv = d3.select('#chartArea').append('div').style('visibility', 'hidden').style('position', 'absolute').style('background-color', '#ccc').style('padding', '10px').style('border-radius', '5px'); //setting up data\n\n    const circle = svg.append('g').attr(\"clip-path\", 'url(#clip)');\n    circle.selectAll('circle').data(data).join('circle').attr('cx', d => xScale(d[cat.current])).attr('cy', d => yScale(d[num.current])).attr('r', 5).attr('fill', d => color(d[num.current])).on('mouseover', (e, d) => {\n      d3.select(e.currentTarget).attr('r', 5 * 2).attr('fill', 'orange');\n      tooldiv.style('visibility', 'visible').text(`${d['Title']}`);\n    }).on('mousemove', (e, d) => {\n      tooldiv.style('top', e.pageY - 50 + 'px').style('left', e.pageX - 50 + 'px');\n    }).on('mouseout', (e, d) => {\n      d3.select(e.currentTarget).attr('r', 5).attr('fill', 'blue');\n      tooldiv.style('visibility', 'hidden');\n    }); //update option\n\n    function updateX(selectedGroup) {\n      cat.current = selectedGroup;\n      console.log(cat.current + ' ' + num.current);\n      const newXScale = d3.scalePoint().domain(data.map(function (d) {\n        return d[selectedGroup];\n      })).range([0, w]);\n      const newYScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n        return d[num.current];\n      })]).range([h, 0]);\n      d3.select('#x-axis').attr('transform', `translate(0, ${h})`).call(d3.axisBottom(newXScale).tickValues([]));\n      d3.select('#y-axis').call(d3.axisLeft(newYScale)); //set up zoom\n\n      const zoom = d3.zoom().scaleExtent([-5, 50]).extent([[0, 0], [w, h]]).on('zoom', zoomed);\n\n      function zoomed(e) {\n        const newY = e.transform.rescaleY(newYScale);\n        const newX = newXScale.range([margin.left, w - margin.right].map(d => e.transform.applyX(d)));\n        yAxis.call(d3.axisLeft(newY));\n        circle.selectAll('circle').attr('cy', function (d) {\n          return newY(d[num.current]);\n        }).attr('cx', function (d) {\n          return newX(d[selectedGroup]);\n        });\n      }\n\n      svg.selectAll('rect').call(zoom);\n      circle.selectAll('circle').on('mouseover', (e, d) => {\n        if (selectedGroup !== 'Title') {\n          d3.select(e.currentTarget).attr('r', 5 * 2).attr('fill', 'orange');\n          tooldiv.style('visibility', 'visible').text(`Title: ${d['Title']}  ${labelX}: ${d[selectedGroup]}`);\n        } else {\n          d3.select(e.currentTarget).attr('r', 5 * 2).attr('fill', 'orange');\n          tooldiv.style('visibility', 'visible').text(`${d['Title']}`);\n        }\n      }).transition().duration(1000).attr('cx', function (d) {\n        return newXScale(d[selectedGroup]);\n      }).attr('cy', function (d) {\n        return newYScale(d[num.current]);\n      });\n    }\n\n    d3.select('#x-cat').on('change', function (e, d) {\n      const selectedOpt = d3.select(this).property('value');\n      labelX = e.target.selectedOptions[0].getAttribute('label');\n      d3.selectAll('#x-label').text(labelX);\n      updateX(selectedOpt);\n    });\n\n    function updateY(selectedGroup) {\n      num.current = selectedGroup;\n      console.log(cat.current + ' ' + num.current); //set up color\n\n      const color = d3.scaleSequential(d3.interpolateViridis).domain([0, d3.max(data, function (d) {\n        return d[selectedGroup];\n      })]);\n      const newXScale = d3.scalePoint().domain(data.map(function (d) {\n        return d[cat.current];\n      })).range([0, w]);\n      const newYScale = d3.scaleLinear().domain(d3.extent(data, function (d) {\n        return d[selectedGroup];\n      })).range([h, 0]);\n      d3.select('#y-axis').call(d3.axisLeft(newYScale));\n      d3.select('#x-axis').call(d3.axisBottom(newXScale).tickValues([])); //set up zoom\n\n      const zoom = d3.zoom().scaleExtent([-5, 50]).extent([[0, 0], [w, h]]).on('zoom', zoomed);\n\n      function zoomed(e) {\n        const newY = e.transform.rescaleY(newYScale);\n        const newX = newXScale.range([margin.left, w - margin.right].map(d => e.transform.applyX(d)));\n        yAxis.call(d3.axisLeft(newY));\n        circle.selectAll('circle').attr('cy', function (d) {\n          return newY(d[selectedGroup]);\n        }).attr('cx', function (d) {\n          return newX(d[cat.current]);\n        });\n      }\n\n      svg.selectAll('rect').call(zoom);\n      circle.selectAll('circle').transition().duration(1000).attr('fill', d => color(d[selectedGroup])).attr('cy', d => newYScale(d[selectedGroup])).attr('cx', function (d) {\n        return newXScale(d[cat.current]);\n      });\n    }\n\n    d3.select('#y-cat').on('change', function (e, d) {\n      const selectedOpt = d3.select(this).property('value');\n      labelY = e.target.selectedOptions[0].getAttribute('label');\n      d3.selectAll('#y-label').text(labelY);\n      updateY(selectedOpt);\n    });\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selection\",\n      style: selectionStyle,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Select X Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 337,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"x-cat\",\n        children: \"Select X Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 338,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Select Y Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 339,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"y-cat\",\n        children: \"Select Y Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"chartArea\",\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: svgRef,\n        children: [/*#__PURE__*/_jsxDEV(\"g\", {\n          id: \"x-axis\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n          id: \"y-axis\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n          id: \"legend\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 342,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 335,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Scatterplot, \"h/FVKb3wFnkb5UV+KME4H1+1w8Q=\");\n\n_c = Scatterplot;\nexport default Scatterplot;\n\nvar _c;\n\n$RefreshReg$(_c, \"Scatterplot\");","map":{"version":3,"sources":["/home/Panda21/Documents/Emory/2021 - 2022/CS 485/m4-search/m4-status-update-wii-design/src/components/scatterplot.js"],"names":["React","useRef","useEffect","useState","d3","legendColor","Scatterplot","svgRef","data","setData","cat","num","optX","value","label","optY","selectionStyle","display","margin","csv","then","console","log","labelX","labelY","color","scaleSequential","interpolateViridis","domain","max","d","current","w","h","top","right","bottom","left","svg","select","attr","style","append","selectAll","join","text","yScale","scaleLinear","range","xScale","scalePoint","map","legend","shapeWidth","scale","call","zoom","scaleExtent","extent","on","zoomed","e","newY","transform","rescaleY","newX","applyX","yAxis","axisLeft","circle","axisBottom","tickValues","tooldiv","currentTarget","pageY","pageX","updateX","selectedGroup","newXScale","newYScale","transition","duration","selectedOpt","property","target","selectedOptions","getAttribute","updateY"],"mappings":"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","sourcesContent":["import React, {useRef, useEffect, useState} from \"react\";\nimport * as d3 from 'd3';\nimport {legendColor }from \"d3-svg-legend\";\n\nconst Scatterplot = () => {\n\n    const svgRef = useRef();\n    const [data, setData] = useState([]);\n    const cat = useRef('Title');\n    const num = useRef('Metrics.Review Score')\n\n    const optX = [\n        { value: 'Title', label:'Title'},\n        { value: 'Release.Console', label: 'Console'},\n        { value: 'Metadata.Publishers', label: 'Publishers'},\n        { value: 'Release.Rating', label: 'Rating'},\n        { value: 'Metadata.Genres', label: 'Genres'}\n    ]\n\n    const optY = [\n        {value: 'Metrics.Review Score', label: 'Review Score'},\n        {value: 'Metrics.Sales', label: 'Sales'},\n        {value: 'Metrics.Used Price', label: 'Used Price'},\n        {value: 'Length.All PlayStyles.Median', label: 'Median All Playstyles Play Time'},\n        {value: 'Length.Completionists.Median', label: 'Median Completionist Play Time'}\n    ]\n\n    const selectionStyle = {\n        display: 'flex',\n        margin: '20px'\n    }\n\n    useEffect(()=> {\n        d3.csv(\"/data/video_games.csv\")\n            .then((data) =>{\n                setData(data);\n                console.log(data)         \n        })\n    }, []);\n\n    useEffect(() => {\n\n        let labelX = '';\n        let labelY = '';\n        //set up color\n        const color = d3.scaleSequential(d3.interpolateViridis)\n            .domain([0, d3.max(data, function(d) {return d[num.current]})])\n\n        //set up container\n        const w = 800;\n        const h = 400;\n        const margin = {top:20, right:20, bottom:30, left:40};\n        const svg = d3.select(svgRef.current)\n            .attr('width', w)\n            .attr('height', h)\n            .style('overflow', 'visible')\n            .style('margin-top', '10px')\n            .style('margin-bottom', '50px')\n            .append('g')\n\n        //set options\n        d3.select('#x-cat')\n            .selectAll('option')\n                .data(optX)\n            .join('option')\n            .text(function(d){return d.label})\n            .attr('value', function(d){return d.value})\n            .attr('label', function(d){return d.label})\n\n        d3.select('#y-cat')\n            .selectAll('option')\n                .data(optY)\n            .join('option')\n            .text(function(d){return d.label})\n            .attr('value', function(d){return d.value})\n            .attr('label', function(d){return d.label})\n\n            //setting scales\n            const yScale = d3.scaleLinear()\n                .domain([0,d3.max(data, function(d) {return d[num.current]})])\n                .range([h,0]);\n\n            const xScale = d3.scalePoint()\n                .domain(data.map(function(d) {return d[cat.current]}))\n                .range([0,w])\n\n\n            //set up legend\n            const legend = legendColor()\n                .shapeWidth(30)\n                .scale(color)\n\n            d3.selectAll('#legend')\n                .attr('transform', 'translate(' + (w+30) + ',0)')\n                .call(legend)\n\n            //set up zoom\n            const zoom = d3.zoom()\n            .scaleExtent([-5,50])\n            .extent([[0,0],[w,h]])\n            .on('zoom', zoomed);\n\n            // rescaling\n            function zoomed(e) {\n                const newY = e.transform.rescaleY(yScale);\n                const newX = xScale.range([margin.left, w-margin.right].map(d => e.transform.applyX(d)));\n\n                yAxis.call(d3.axisLeft(newY));\n\n                circle\n                    .selectAll('circle')\n                    .attr('cy', function(d) {return newY(d[num.current])})\n                    .attr('cx', function(d) {return newX(d[cat.current])})\n            }\n    \n        \n            //clipPath - nothing draw outside the area\n\n            svg.append('defs').append('svg:clipPath')\n                .attr(\"id\", \"clip\")\n                .append('svg:rect')\n                .attr('width', w)\n                .attr('height',h)\n                .attr('x', 0)\n                .attr('y',0)\n\n            //invisible rect on top of the chart to recover pointer events\n            svg.append('rect')\n                .attr('width', w)\n                .attr('height',h)\n                .style('fill', 'none')\n                .style('pointer-events', 'all')\n                .call(zoom)\n\n\n            //set up axes\n            d3.select('#x-axis')\n                .attr('transform', `translate(0, ${h})`)\n                .call(d3.axisBottom(xScale).tickValues([]))\n            \n            const yAxis = d3.select('#y-axis')\n                .call(d3.axisLeft(yScale))\n\n            //set label\n            svg.append('text')\n                .attr('id','x-label')\n                .attr('x', w/2)\n                .attr('y', h+50)\n                .text('Title')\n            \n            svg.append('text')\n                .attr('id', 'y-label')\n                .attr('y', h/2)\n                .attr('x', -300)\n                .text('Review Score')\n\n            //set up tooltip\n            const tooldiv = d3.select('#chartArea')\n                .append('div')\n                .style('visibility', 'hidden')\n                .style('position', 'absolute')\n                .style('background-color', '#ccc')\n                .style('padding', '10px')\n                .style('border-radius', '5px')\n\n            //setting up data\n            const circle = svg.append('g')\n            .attr(\"clip-path\", 'url(#clip)')\n\n            circle\n                .selectAll('circle')\n                .data(data)\n                .join('circle')\n                    .attr('cx', d => xScale(d[cat.current]))\n                    .attr('cy', d => yScale(d[num.current]))\n                    .attr('r',5)\n                    .attr('fill', d=>color(d[num.current]))\n                    .on('mouseover',(e,d) => {\n                        d3.select(e.currentTarget)\n                            .attr('r', 5*2)\n                            .attr('fill', 'orange')\n                        tooldiv.style('visibility','visible')\n                            .text(`${d['Title']}`)\n                    })\n                    .on('mousemove', (e,d)=>{\n                        tooldiv.style('top', (e.pageY-50) + 'px')\n                            .style('left', (e.pageX-50)+ 'px')\n                    })\n                    .on('mouseout', (e,d) => {\n                        d3.select(e.currentTarget)\n                            .attr('r', 5)\n                            .attr('fill', 'blue')\n                        tooldiv.style('visibility','hidden')\n                    })\n        \n        //update option\n        function updateX(selectedGroup) {\n            cat.current = selectedGroup\n            console.log(cat.current + ' ' + num.current)\n\n            const newXScale = d3.scalePoint()\n                .domain(data.map(function(d){return d[selectedGroup]}))\n                .range([0,w])\n\n            const newYScale = d3.scaleLinear()\n                .domain([0, d3.max(data, function(d) {return d[num.current]})])\n                .range([h,0])\n\n            d3.select('#x-axis')\n                .attr('transform', `translate(0, ${h})`)\n                .call(d3.axisBottom(newXScale).tickValues([]))\n\n            d3.select('#y-axis')\n                .call(d3.axisLeft(newYScale))\n\n            //set up zoom\n            const zoom = d3.zoom()\n            .scaleExtent([-5,50])\n            .extent([[0,0],[w,h]])\n            .on('zoom', zoomed);\n\n            function zoomed(e){\n                const newY = e.transform.rescaleY(newYScale);\n                const newX = newXScale.range([margin.left, w-margin.right].map(d => e.transform.applyX(d)));\n\n                yAxis.call(d3.axisLeft(newY));\n\n                circle\n                    .selectAll('circle')\n                    .attr('cy', function(d) {return newY(d[num.current])})\n                    .attr('cx', function(d) {return newX(d[selectedGroup])})\n            }\n\n            svg.selectAll('rect')\n                .call(zoom)\n\n            circle\n                .selectAll('circle')\n                    .on('mouseover',(e,d) => {\n                        if(selectedGroup !== 'Title') {\n                            d3.select(e.currentTarget)\n                            .attr('r', 5*2)\n                            .attr('fill', 'orange')\n\n                            tooldiv.style('visibility','visible')\n                            .text(`Title: ${d['Title']}  ${labelX}: ${d[selectedGroup]}`)\n                        }\n                        else {\n                            d3.select(e.currentTarget)\n                            .attr('r', 5*2)\n                            .attr('fill', 'orange')\n\n                            tooldiv.style('visibility','visible')\n                            .text(`${d['Title']}`)\n                        }\n\n                    })\n                .transition()\n                .duration(1000)\n                .attr('cx', function(d){return newXScale(d[selectedGroup])})    \n                .attr('cy', function(d){return newYScale(d[num.current])})\n            \n        }\n\n        d3.select('#x-cat').on('change', function(e,d) {\n            const selectedOpt = d3.select(this).property('value')\n            labelX = e.target.selectedOptions[0].getAttribute('label')\n            d3.selectAll('#x-label').text(labelX)\n            updateX(selectedOpt);\n        })\n\n        function updateY(selectedGroup) {\n            num.current = selectedGroup\n            console.log(cat.current + ' ' + num.current)\n\n            //set up color\n            const color = d3.scaleSequential(d3.interpolateViridis)\n                .domain([0, d3.max(data, function(d) {return d[selectedGroup]})])\n\n            const newXScale = d3.scalePoint()\n                .domain(data.map(function(d){return d[cat.current]}))\n                .range([0,w])\n\n            const newYScale = d3.scaleLinear()\n                .domain(d3.extent(data,function(d){return d[selectedGroup]}))\n                .range([h,0])\n\n\n            d3.select('#y-axis')\n                .call(d3.axisLeft(newYScale))\n\n            d3.select('#x-axis')\n                .call(d3.axisBottom(newXScale).tickValues([]))\n\n                //set up zoom\n            const zoom = d3.zoom()\n            .scaleExtent([-5,50])\n            .extent([[0,0],[w,h]])\n            .on('zoom', zoomed);\n\n            function zoomed(e){\n                const newY = e.transform.rescaleY(newYScale);\n                const newX = newXScale.range([margin.left, w-margin.right].map(d => e.transform.applyX(d)));\n\n                yAxis.call(d3.axisLeft(newY));\n\n                circle\n                    .selectAll('circle')\n                    .attr('cy', function(d) {return newY(d[selectedGroup])})\n                    .attr('cx', function(d) {return newX(d[cat.current])})\n            }\n\n            svg.selectAll('rect')\n                .call(zoom)\n\n            circle\n                .selectAll('circle')\n                .transition()\n                .duration(1000)\n                .attr('fill', d=>color(d[selectedGroup]))\n                .attr('cy', d=> newYScale(d[selectedGroup]))\n                .attr('cx', function(d){return newXScale(d[cat.current])})\n            \n        }\n        d3.select('#y-cat').on('change', function(e,d) {\n            const selectedOpt = d3.select(this).property('value');\n            labelY = e.target.selectedOptions[0].getAttribute('label')\n            d3.selectAll('#y-label').text(labelY);\n            updateY(selectedOpt);\n        })\n        \n    }, [data]);\n\n    return(\n        <React.Fragment>\n            <div className='selection' style={selectionStyle}>\n                <p>Select X Value</p>\n                <select id='x-cat'>Select X Value</select>\n                <p>Select Y Value</p>\n                <select id= 'y-cat'>Select Y Value</select>\n            </div>\n            <div id = 'chartArea'>\n                <svg ref = {svgRef}>\n                    <g id ='x-axis'></g>\n                    <g id = 'y-axis'></g>\n                    <g id = 'legend'></g>\n                </svg>\n            </div>\n            \n        </React.Fragment>\n    )\n}\n\nexport default Scatterplot;\n"]},"metadata":{},"sourceType":"module"}