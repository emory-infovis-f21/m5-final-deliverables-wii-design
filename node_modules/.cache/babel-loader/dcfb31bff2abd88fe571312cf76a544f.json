{"ast":null,"code":"var _jsxFileName = \"/home/Panda21/Documents/Emory/2021 - 2022/CS 485/m4-search/m4-status-update-wii-design/src/components/scatterplot.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState, useCallback } from \"react\";\nimport * as d3 from 'd3';\nimport { legendColor } from \"d3-svg-legend\";\nimport Table from './Table';\nimport './scatterplot.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Scatterplot = dataSet => {\n  _s();\n\n  const svgRef = useRef();\n  const [data, setData] = useState([]);\n  const [tablerows, setTableRows] = useState([]);\n  const [counter, setCounter] = useState(0);\n  const [holder, setHolder] = useState([]);\n  const list = new Array([]);\n  const cat = useRef('Critic Score');\n  const num = useRef('North America Sales');\n  const optX = [{\n    value: 'Critic Score',\n    label: 'Critic Score'\n  }, {\n    value: 'User Score',\n    label: 'User Score'\n  }, {\n    value: 'Global Sales',\n    label: 'Global Sales'\n  }];\n  const optY = [{\n    value: 'North America Sales',\n    label: 'North America Sales'\n  }, {\n    value: 'Average Play Length_All PlayStyles',\n    label: 'Average All Playstyles Play Time'\n  }, {\n    value: 'Average Play Length_Leisure',\n    label: 'Average Leisure Play Time'\n  }];\n  const optColor = [{\n    value: 'Genres',\n    label: 'Genres'\n  }, {\n    value: 'Platform',\n    label: 'Platform'\n  }, {\n    value: 'Developer',\n    label: 'Developer'\n  }, {\n    value: 'Rating',\n    label: 'Rating'\n  }];\n  const selectionStyle = {\n    display: 'flex',\n    margin: '20px'\n  };\n  const chartStyle = {\n    overflow: 'auto',\n    height: '500px',\n    width: '800px',\n    display: 'flex'\n  };\n  useEffect(() => {\n    d3.csv(\"/data/clean_data.csv\").then(da => {\n      var list1 = dataSet.dataSet.map(game => {\n        return game.row;\n      });\n      setData(list1);\n    });\n  }, [dataSet.dataSet]);\n  useEffect(() => {\n    let labelX = '';\n    let labelY = ''; //set up color\n\n    const color = d3.scaleOrdinal().domain(data.map(function (d) {\n      return d['Genres'];\n    })).range(d3.schemeCategory10); //set up container\n\n    const w = 800;\n    const h = 400;\n    const margin = {\n      top: 20,\n      right: 20,\n      bottom: 30,\n      left: 40\n    };\n    d3.selectAll('circle').remove();\n    d3.selectAll('#legendArea').remove();\n    const svg = d3.select(svgRef.current).attr('width', w).attr('height', h).style('overflow', 'visible').style('margin-top', '10px').style('margin-bottom', '50px').style('position', 'absolute').style('left', '100px').append('g'); //set options\n\n    d3.select('#x-cat').selectAll('option').data(optX).join('option').text(function (d) {\n      return d.label;\n    }).attr('value', function (d) {\n      return d.value;\n    }).attr('label', function (d) {\n      return d.label;\n    });\n    d3.select('#y-cat').selectAll('option').data(optY).join('option').text(function (d) {\n      return d.label;\n    }).attr('value', function (d) {\n      return d.value;\n    }).attr('label', function (d) {\n      return d.label;\n    });\n    d3.select('#color-cat').selectAll('option').data(optColor).join('option').text(function (d) {\n      return d.label;\n    }).attr('value', function (d) {\n      return d.value;\n    }).attr('label', function (d) {\n      return d.label;\n    }); //setting scales\n\n    const yScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n      return d[num.current];\n    })]).range([h, 0]);\n    const xScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n      return d[cat.current];\n    })]).range([0, w]); //set up legend\n\n    const legend = legendColor().shapeWidth(20).shapeHeight(5).scale(color);\n    d3.selectAll('#chartArea').append('div').attr('id', 'legendArea').style('height', '400px').style('width', '500px').style('position', 'absolute').style('left', '930px').style('overflow-y', 'scroll').append('svg').attr('id', 'legend').attr('height', '120vh').attr('width', '100vh').style('overflow', 'scroll').style('display', 'flex').call(legend); //set up zoom\n\n    const zoom = d3.zoom().scaleExtent([-5, 50]).extent([[0, 0], [w, h]]).on('zoom', zoomed); // rescaling\n\n    function zoomed(e) {\n      const newY = e.transform.rescaleY(yScale);\n      const newX = e.transform.rescaleX(xScale);\n      xAxis.call(d3.axisBottom(newX));\n      yAxis.call(d3.axisLeft(newY));\n      circle.selectAll('circle').attr('cy', function (d) {\n        return newY(d[num.current]);\n      }).attr('cx', function (d) {\n        return newX(d[cat.current]);\n      });\n    } //clipPath - nothing draw outside the area\n\n\n    svg.append('defs').append('svg:clipPath').attr(\"id\", \"clip\").append('svg:rect').attr('width', w).attr('height', h).attr('x', 0).attr('y', 0); //invisible rect on top of the chart to recover pointer events\n\n    svg.append('rect').attr('width', w).attr('height', h).style('fill', 'none').style('pointer-events', 'all').call(zoom); //set up axes\n\n    const xAxis = d3.select('#x-axis').attr('transform', `translate(0, ${h})`).call(d3.axisBottom(xScale));\n    const yAxis = d3.select('#y-axis') //.attr('transform', `translate(0, ${w})`)\n    .call(d3.axisLeft(yScale)); //set label\n\n    svg.append('text').attr('id', 'x-label').attr('x', w / 2).attr('y', h + 50).text('Critic Score');\n    svg.append('text').attr('id', 'y-label').attr('y', h - 450).attr('x', -320).attr(\"transform\", \"rotate(270)\").text('North America Sales'); //set up tooltip\n\n    const tooldiv = d3.select('#chartArea').append('div').style('visibility', 'hidden').style('position', 'absolute').style('background-color', '#ccc').style('padding', '10px').style('border-radius', '5px'); //setting up data\n\n    const circle = svg.append('g').attr(\"clip-path\", 'url(#clip)');\n    circle.selectAll('circle').data(data).join('circle').attr('cx', d => xScale(d[cat.current])).attr('cy', d => yScale(d[num.current])).attr('r', 5).attr('fill', d => color(d.Genres)).on('mouseover', (e, d) => {\n      d3.select(e.currentTarget).attr('r', 5 * 2).attr('fill', 'orange');\n      tooldiv.style('visibility', 'visible').text(`${d['Title']}`);\n    }).on('mousemove', (e, d) => {\n      tooldiv.style('top', e.pageY - 50 + 'px').style('left', e.pageX - 50 + 'px');\n    }).on('mouseout', (e, d) => {\n      d3.select(e.currentTarget).attr('r', 5).attr('fill', 'blue');\n      tooldiv.style('visibility', 'hidden');\n    }).on('click', (e, d) => {\n      list.push(d);\n      setCounter(cou++);\n      setTableRows(list);\n      return list;\n    }); //update option\n\n    function updateX(selectedGroup) {\n      cat.current = selectedGroup;\n      console.log(cat.current + ' ' + num.current);\n      const newXScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n        return d[cat.current];\n      })]).range([0, w]);\n      const newYScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n        return d[num.current];\n      })]).range([h, 0]);\n      d3.select('#x-axis') //.attr('transform', `translate(0, ${h})`)\n      .call(d3.axisBottom(newXScale));\n      d3.select('#y-axis') //.attr('transform', `translate(0, ${w})`)\n      .call(d3.axisLeft().scale(yScale)); //set up zoom\n\n      const zoom = d3.zoom().scaleExtent([-5, 50]).extent([[0, 0], [w, h]]).on('zoom', zoomed);\n\n      function zoomed(e) {\n        const newY = e.transform.rescaleY(yScale);\n        const newX = e.transform.rescaleX(xScale);\n        xAxis.call(d3.axisBottom(newX));\n        yAxis.call(d3.axisLeft(newY));\n        circle.selectAll('circle').attr('cy', function (d) {\n          return newY(d[num.current]);\n        }).attr('cx', function (d) {\n          return newX(d[selectedGroup]);\n        });\n      }\n\n      svg.selectAll('rect').call(zoom);\n      circle.selectAll('circle').on('mouseover', (e, d) => {\n        if (selectedGroup !== 'Title') {\n          d3.select(e.currentTarget).attr('r', 5 * 2).attr('fill', 'orange');\n          tooldiv.style('visibility', 'visible').text(`Title: ${d['Title']}  ${labelX}: ${d[selectedGroup]}`);\n        } else {\n          d3.select(e.currentTarget).attr('r', 5 * 2).attr('fill', 'orange');\n          tooldiv.style('visibility', 'visible').text(`${d['Title']}`);\n        }\n      }).transition().duration(1000).attr('fill', d => color(d['Genres'])).attr('cx', function (d) {\n        return newXScale(d[selectedGroup]);\n      }).attr('cy', function (d) {\n        return newYScale(d[num.current]);\n      });\n    }\n\n    d3.select('#x-cat').on('change', function (e, d) {\n      const selectedOpt = d3.select(this).property('value');\n      labelX = e.target.selectedOptions[0].getAttribute('label');\n      d3.selectAll('#x-label').text(labelX);\n      updateX(selectedOpt);\n    });\n\n    function updateY(selectedGroup) {\n      num.current = selectedGroup;\n      console.log(cat.current + ' ' + num.current);\n      const newXScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n        return d[cat.current];\n      })]).range([0, w]);\n      const newYScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n        return d[selectedGroup];\n      })]).range([h, 0]);\n      d3.select('#y-axis').call(d3.axisLeft(newYScale));\n      d3.select('#x-axis').call(d3.axisBottom(newXScale)); //set up zoom\n\n      const zoom = d3.zoom().scaleExtent([-5, 50]).extent([[0, 0], [w, h]]).on('zoom', zoomed);\n\n      function zoomed(e) {\n        const newY = e.transform.rescaleY(yScale);\n        const newX = e.transform.rescaleX(xScale);\n        xAxis.call(d3.axisBottom(newX));\n        yAxis.call(d3.axisLeft(newY));\n        circle.selectAll('circle').attr('cy', function (d) {\n          return newY(d[selectedGroup]);\n        }).attr('cx', function (d) {\n          return newX(d[cat.current]);\n        });\n      }\n\n      svg.selectAll('rect').call(zoom);\n      circle.selectAll('circle').transition().duration(1000).attr('cy', d => newYScale(d[selectedGroup])).attr('cx', function (d) {\n        return newXScale(d[cat.current]);\n      }).attr('fill', d => color(d['Genres']));\n    }\n\n    d3.select('#y-cat').on('change', function (e, d) {\n      const selectedOpt = d3.select(this).property('value');\n      labelY = e.target.selectedOptions[0].getAttribute('label');\n      d3.selectAll('#y-label').text(labelY);\n      updateY(selectedOpt);\n    });\n\n    function updateColor(selectedGroup) {\n      const color = d3.scaleOrdinal().domain(data.map(function (d) {\n        return d[selectedGroup];\n      })).range(d3.schemeCategory10);\n      const legend = legendColor().shapeWidth(20).shapeHeight(5).scale(color);\n      d3.selectAll('#legendArea').remove();\n\n      if (selectedGroup === 'Rating') {\n        d3.selectAll('#chartArea').append('div').attr('id', 'legendArea').style('height', '400px').style('width', '500px').style('position', 'absolute').style('left', '930px').style('overflow-y', 'scroll').append('svg').attr('id', 'legend').style('overflow', 'scroll').style('display', 'flex').call(legend);\n      } else if (selectedGroup === 'Platform') {\n        d3.selectAll('#chartArea').append('div').attr('id', 'legendArea').style('height', '400px').style('width', '500px').style('position', 'absolute').style('left', '930px').style('overflow-y', 'scroll').append('svg').attr('id', 'legend').style('overflow', 'scroll').style('display', 'flex').call(legend);\n      } else if (selectedGroup === 'Developer') {\n        d3.selectAll('#chartArea').append('div').attr('id', 'legendArea').style('height', '400px').style('width', '500px').style('position', 'absolute').style('left', '930px').style('overflow-y', 'scroll').append('svg').attr('id', 'legend').attr('height', '90vh').style('overflow', 'scroll').style('display', 'flex').call(legend);\n      } else {\n        d3.selectAll('#chartArea').append('div').attr('id', 'legendArea').style('height', '400px').style('width', '500px').style('position', 'absolute').style('left', '930px').style('overflow-y', 'scroll').append('svg').attr('id', 'legend').attr('height', '120vh').attr('width', '100vh').style('overflow', 'scroll').style('display', 'flex').call(legend);\n      }\n\n      circle.selectAll('circle').attr('fill', d => color(d[selectedGroup]));\n    }\n\n    d3.select('#color-cat').on('change', function (e, d) {\n      const selectedOpt = d3.select(this).property('value');\n      updateColor(selectedOpt);\n    });\n  }, [data]);\n  let cou = 0;\n  useEffect(() => {\n    console.log(tablerows);\n    setHolder(tablerows);\n    return tablerows;\n  }, [counter]);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selection\",\n      style: selectionStyle,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Select X Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"x-cat\",\n        children: \"Select X Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 17\n      }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Select Y Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"y-cat\",\n        children: \"Select Y Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 17\n      }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Select Color Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 491,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"color-cat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 486,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"chartArea\",\n      style: chartStyle,\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: svgRef,\n        children: [/*#__PURE__*/_jsxDEV(\"g\", {\n          id: \"x-axis\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n          id: \"y-axis\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 13\n    }, this), tablerows && tablerows.length > 0 ? /*#__PURE__*/_jsxDEV(Table, {\n      data: tablerows,\n      num: holder\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 501,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Select dots\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 502,\n      columnNumber: 16\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 485,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Scatterplot, \"FHq8IEX3T17CY2CnUmMQKDC3EHY=\");\n\n_c = Scatterplot;\nexport default Scatterplot;\n\nvar _c;\n\n$RefreshReg$(_c, \"Scatterplot\");","map":{"version":3,"sources":["/home/Panda21/Documents/Emory/2021 - 2022/CS 485/m4-search/m4-status-update-wii-design/src/components/scatterplot.js"],"names":["React","useRef","useEffect","useState","useCallback","d3","legendColor","Table","Scatterplot","dataSet","svgRef","data","setData","tablerows","setTableRows","counter","setCounter","holder","setHolder","list","Array","cat","num","optX","value","label","optY","optColor","selectionStyle","display","margin","chartStyle","overflow","height","width","csv","then","da","list1","map","game","row","labelX","labelY","color","scaleOrdinal","domain","d","range","schemeCategory10","w","h","top","right","bottom","left","selectAll","remove","svg","select","current","attr","style","append","join","text","yScale","scaleLinear","max","xScale","legend","shapeWidth","shapeHeight","scale","call","zoom","scaleExtent","extent","on","zoomed","e","newY","transform","rescaleY","newX","rescaleX","xAxis","axisBottom","yAxis","axisLeft","circle","tooldiv","Genres","currentTarget","pageY","pageX","push","cou","updateX","selectedGroup","console","log","newXScale","newYScale","transition","duration","selectedOpt","property","target","selectedOptions","getAttribute","updateY","updateColor","length"],"mappings":"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","sourcesContent":["import React, {useRef, useEffect, useState, useCallback} from \"react\";\nimport * as d3 from 'd3';\nimport {legendColor }from \"d3-svg-legend\";\nimport Table from './Table';\nimport './scatterplot.css'\n\n\nconst Scatterplot = (dataSet) => {\n\n    const svgRef = useRef();\n    const [data, setData] = useState([]);\n    const [tablerows, setTableRows] = useState([]);\n    const [counter, setCounter] = useState(0);\n    const [holder, setHolder] = useState([]);\n    const list = new Array([]);\n    const cat = useRef('Critic Score');\n    const num = useRef('North America Sales')\n\n    const optX = [\n        {value: 'Critic Score', label: 'Critic Score'},\n        {value: 'User Score', label: 'User Score'},\n        {value: 'Global Sales', label: 'Global Sales'},\n    ]\n\n    const optY = [\n        {value: 'North America Sales', label: 'North America Sales'},\n        {value: 'Average Play Length_All PlayStyles', label: 'Average All Playstyles Play Time'},\n        {value: 'Average Play Length_Leisure', label: 'Average Leisure Play Time'}\n    ]\n\n    const optColor = [\n        {value: 'Genres', label: 'Genres'},\n        {value: 'Platform', label:'Platform'},\n        {value: 'Developer', label:'Developer'},\n        {value: 'Rating', label: 'Rating'}\n    ]\n\n    const selectionStyle = {\n        display: 'flex',\n        margin: '20px'\n    }\n\n    const chartStyle = {\n        overflow: 'auto',\n        height: '500px',\n        width: '800px',\n        display:'flex'\n    }\n\n    useEffect(()=> {\n        d3.csv(\"/data/clean_data.csv\")\n            .then((da) =>{\n                var list1 = dataSet.dataSet.map((game)=>{\n                    return game.row;\n                })\n                setData(list1);\n        })\n    }, [dataSet.dataSet]);\n\n    useEffect(() => {\n\n        let labelX = '';\n        let labelY = '';\n        //set up color\n        const color = d3.scaleOrdinal()\n            .domain(data.map(function(d) {return d['Genres']}))\n            .range(d3.schemeCategory10)\n\n        //set up container\n        const w = 800;\n        const h = 400;\n        const margin = {top:20, right:20, bottom:30, left:40};\n        d3.selectAll('circle').remove();\n        d3.selectAll('#legendArea').remove() \n        const svg = d3.select(svgRef.current)\n            .attr('width', w)\n            .attr('height', h)\n            .style('overflow', 'visible')\n            .style('margin-top', '10px')\n            .style('margin-bottom', '50px')\n            .style('position', 'absolute')\n            .style('left', '100px')\n            .append('g')\n\n        //set options\n        d3.select('#x-cat')\n            .selectAll('option')\n                .data(optX)\n            .join('option')\n            .text(function(d){return d.label})\n            .attr('value', function(d){return d.value})\n            .attr('label', function(d){return d.label})\n\n        d3.select('#y-cat')\n            .selectAll('option')\n                .data(optY)\n            .join('option')\n            .text(function(d){return d.label})\n            .attr('value', function(d){return d.value})\n            .attr('label', function(d){return d.label})\n\n        d3.select('#color-cat')\n            .selectAll('option')\n                .data(optColor)\n            .join('option')\n            .text(function(d){return d.label})\n            .attr('value', function(d){return d.value})\n            .attr('label', function(d){return d.label})\n\n            //setting scales\n            const yScale = d3.scaleLinear()\n                .domain([0, d3.max(data, function(d) {return d[num.current]})])\n                .range([h,0]);\n\n            const xScale = d3.scaleLinear()\n                .domain([0, d3.max(data,function(d) {return d[cat.current]})])\n                .range([0,w])\n\n\n            //set up legend\n            const legend = legendColor()\n                .shapeWidth(20)\n                .shapeHeight(5)\n                .scale(color)\n\n            d3.selectAll('#chartArea')\n                .append('div')\n                .attr('id','legendArea')\n                .style('height', '400px')\n                .style('width', '500px')\n                .style('position', 'absolute')\n                .style('left', '930px')\n                .style('overflow-y', 'scroll')\n                .append('svg')\n                .attr('id', 'legend')\n                .attr('height', '120vh')\n                .attr('width', '100vh')\n                .style('overflow', 'scroll')\n                .style('display', 'flex')\n                .call(legend)\n\n            //set up zoom\n            const zoom = d3.zoom()\n            .scaleExtent([-5,50])\n            .extent([[0,0],[w,h]])\n            .on('zoom', zoomed);\n\n            // rescaling\n            function zoomed(e) {\n                const newY = e.transform.rescaleY(yScale)\n                const newX = e.transform.rescaleX(xScale)\n\n                xAxis.call(d3.axisBottom(newX))\n                yAxis.call(d3.axisLeft(newY))\n\n                circle\n                    .selectAll('circle')\n                    .attr('cy', function(d) {return newY(d[num.current])})\n                    .attr('cx', function(d) {return newX(d[cat.current])})\n            }\n    \n        \n            //clipPath - nothing draw outside the area\n\n            svg.append('defs').append('svg:clipPath')\n                .attr(\"id\", \"clip\")\n                .append('svg:rect')\n                .attr('width', w)\n                .attr('height',h)\n                .attr('x', 0)\n                .attr('y',0)\n\n            //invisible rect on top of the chart to recover pointer events\n            svg.append('rect')\n                .attr('width', w)\n                .attr('height',h)\n                .style('fill', 'none')\n                .style('pointer-events', 'all')\n                .call(zoom)\n\n\n            //set up axes\n            const xAxis = d3.select('#x-axis')\n                .attr('transform', `translate(0, ${h})`)\n                .call(d3.axisBottom(xScale))\n            \n            const yAxis = d3.select('#y-axis')\n                //.attr('transform', `translate(0, ${w})`)\n                .call(d3.axisLeft(yScale))\n\n            //set label\n            svg.append('text')\n                .attr('id','x-label')\n                .attr('x', w/2)\n                .attr('y', h+50)\n                .text('Critic Score')\n            \n            svg.append('text')\n                .attr('id', 'y-label')\n                .attr('y', h-450)\n                .attr('x', -320)\n                .attr(\"transform\", \"rotate(270)\")\n                .text('North America Sales')\n\n            //set up tooltip\n            const tooldiv = d3.select('#chartArea')\n                .append('div')\n                .style('visibility', 'hidden')\n                .style('position', 'absolute')\n                .style('background-color', '#ccc')\n                .style('padding', '10px')\n                .style('border-radius', '5px')\n\n            //setting up data\n            const circle = svg.append('g')\n            .attr(\"clip-path\", 'url(#clip)')\n            \n            circle\n                .selectAll('circle')\n                .data(data)\n                .join('circle')\n                    .attr('cx', d => xScale(d[cat.current]))\n                    .attr('cy', d => yScale(d[num.current]))\n                    .attr('r',5)\n                    .attr('fill', d=>color(d.Genres))\n                    .on('mouseover',(e,d) => {\n                        d3.select(e.currentTarget)\n                            .attr('r', 5*2)\n                            .attr('fill', 'orange')\n                        tooldiv.style('visibility','visible')\n                            .text(`${d['Title']}`)\n                    })\n                    .on('mousemove', (e,d)=>{\n                        tooldiv.style('top', (e.pageY-50) + 'px')\n                            .style('left', (e.pageX-50)+ 'px')\n                    })\n                    .on('mouseout', (e,d) => {\n                        d3.select(e.currentTarget)\n                            .attr('r', 5)\n                            .attr('fill', 'blue')\n                        tooldiv.style('visibility','hidden')\n                    })\n                    .on('click', (e,d)=>{\n                        list.push(d);\n                        setCounter(cou++);\n                        setTableRows(list)\n                        return(list);\n                    })\n        \n        \n\n        //update option\n        function updateX(selectedGroup) {\n            cat.current = selectedGroup\n            console.log(cat.current + ' ' + num.current)\n\n            const newXScale = d3.scaleLinear()\n                .domain([0, d3.max(data,function(d) {return d[cat.current]})])\n                .range([0,w])\n\n            const newYScale = d3.scaleLinear()\n                .domain([0, d3.max(data, function(d) {return d[num.current]})])\n                .range([h,0])\n\n            d3.select('#x-axis')\n                //.attr('transform', `translate(0, ${h})`)\n                .call(d3.axisBottom(newXScale))\n\n            d3.select('#y-axis')\n                //.attr('transform', `translate(0, ${w})`)\n                .call(d3.axisLeft().scale(yScale))\n\n            //set up zoom\n            const zoom = d3.zoom()\n            .scaleExtent([-5,50])\n            .extent([[0,0],[w,h]])\n            .on('zoom', zoomed);\n\n            function zoomed(e){\n                const newY = e.transform.rescaleY(yScale)\n                const newX = e.transform.rescaleX(xScale)\n\n                xAxis.call(d3.axisBottom(newX))\n                yAxis.call(d3.axisLeft(newY))\n\n                circle\n                    .selectAll('circle')\n                    .attr('cy', function(d) {return newY(d[num.current])})\n                    .attr('cx', function(d) {return newX(d[selectedGroup])})\n            }\n\n            svg.selectAll('rect')\n                .call(zoom)\n\n            circle\n                .selectAll('circle')\n                    .on('mouseover',(e,d) => {\n                        if(selectedGroup !== 'Title') {\n                            d3.select(e.currentTarget)\n                            .attr('r', 5*2)\n                            .attr('fill', 'orange')\n\n                            tooldiv.style('visibility','visible')\n                            .text(`Title: ${d['Title']}  ${labelX}: ${d[selectedGroup]}`)\n                        }\n                        else {\n                            d3.select(e.currentTarget)\n                            .attr('r', 5*2)\n                            .attr('fill', 'orange')\n\n                            tooldiv.style('visibility','visible')\n                            .text(`${d['Title']}`)\n                        }\n\n                    })\n                .transition()\n                .duration(1000)\n                .attr('fill', d=>color(d['Genres']))\n                .attr('cx', function(d){return newXScale(d[selectedGroup])})    \n                .attr('cy', function(d){return newYScale(d[num.current])})\n            \n        }\n\n        d3.select('#x-cat').on('change', function(e,d) {\n            const selectedOpt = d3.select(this).property('value')\n            labelX = e.target.selectedOptions[0].getAttribute('label')\n            d3.selectAll('#x-label').text(labelX)\n            updateX(selectedOpt);\n        })\n\n        function updateY(selectedGroup) {\n            num.current = selectedGroup\n            console.log(cat.current + ' ' + num.current)\n\n            const newXScale = d3.scaleLinear()\n                .domain([0, d3.max(data,function(d) {return d[cat.current]})])\n                .range([0,w])\n\n            const newYScale = d3.scaleLinear()\n                .domain([0, d3.max(data,function(d){return d[selectedGroup]})])\n                .range([h,0])\n\n            d3.select('#y-axis')\n                .call(d3.axisLeft(newYScale))\n\n            d3.select('#x-axis')\n                .call(d3.axisBottom(newXScale))\n\n                //set up zoom\n            const zoom = d3.zoom()\n            .scaleExtent([-5,50])\n            .extent([[0,0],[w,h]])\n            .on('zoom', zoomed);\n\n            function zoomed(e){\n                const newY = e.transform.rescaleY(yScale)\n                const newX = e.transform.rescaleX(xScale)\n\n                xAxis.call(d3.axisBottom(newX))\n                yAxis.call(d3.axisLeft(newY))\n\n                circle\n                    .selectAll('circle')\n                    .attr('cy', function(d) {return newY(d[selectedGroup])})\n                    .attr('cx', function(d) {return newX(d[cat.current])})\n            }\n\n            svg.selectAll('rect')\n                .call(zoom)\n\n            circle\n                .selectAll('circle')\n                .transition()\n                .duration(1000)\n                .attr('cy', d=> newYScale(d[selectedGroup]))\n                .attr('cx', function(d){return newXScale(d[cat.current])})\n                .attr('fill', d=>color(d['Genres']))\n            \n        }\n        d3.select('#y-cat').on('change', function(e,d) {\n            const selectedOpt = d3.select(this).property('value');\n            labelY = e.target.selectedOptions[0].getAttribute('label')\n            d3.selectAll('#y-label').text(labelY);\n            updateY(selectedOpt);\n        })\n\n        function updateColor(selectedGroup) {\n\n            const color = d3.scaleOrdinal()\n                .domain(data.map(function(d) {return d[selectedGroup]}))\n                .range(d3.schemeCategory10)\n\n                const legend = legendColor()\n                .shapeWidth(20)\n                .shapeHeight(5)\n                .scale(color)\n\n            d3.selectAll('#legendArea').remove()\n            \n            if(selectedGroup === 'Rating') {\n                d3.selectAll('#chartArea')\n                .append('div')\n                .attr('id','legendArea')\n                .style('height', '400px')\n                .style('width', '500px')\n                .style('position', 'absolute')\n                .style('left', '930px')\n                .style('overflow-y', 'scroll')\n                .append('svg')\n                .attr('id', 'legend')\n                .style('overflow', 'scroll')\n                .style('display', 'flex')\n                .call(legend)\n            }\n            else if (selectedGroup === 'Platform') {\n                d3.selectAll('#chartArea')\n                .append('div')\n                .attr('id','legendArea')\n                .style('height', '400px')\n                .style('width', '500px')\n                .style('position', 'absolute')\n                .style('left', '930px')\n                .style('overflow-y', 'scroll')\n                .append('svg')\n                .attr('id', 'legend')\n                .style('overflow', 'scroll')\n                .style('display', 'flex')\n                .call(legend)\n            }\n            else if(selectedGroup === 'Developer') {\n                d3.selectAll('#chartArea')\n                .append('div')\n                .attr('id','legendArea')\n                .style('height', '400px')\n                .style('width', '500px')\n                .style('position', 'absolute')\n                .style('left', '930px')\n                .style('overflow-y', 'scroll')\n                .append('svg')\n                .attr('id', 'legend')\n                .attr('height', '90vh')\n                .style('overflow', 'scroll')\n                .style('display', 'flex')\n                .call(legend)\n            }\n            else {\n            d3.selectAll('#chartArea')\n                .append('div')\n                .attr('id','legendArea')\n                .style('height', '400px')\n                .style('width', '500px')\n                .style('position', 'absolute')\n                .style('left', '930px')\n                .style('overflow-y', 'scroll')\n                .append('svg')\n                .attr('id', 'legend')\n                .attr('height', '120vh')\n                .attr('width', '100vh')\n                .style('overflow', 'scroll')\n                .style('display', 'flex')\n                .call(legend)\n            }\n\n            circle\n                .selectAll('circle')\n                .attr('fill', d => color(d[selectedGroup]))\n        }\n\n        d3.select('#color-cat').on('change', function(e,d) {\n            const selectedOpt = d3.select(this).property('value')\n            updateColor(selectedOpt);\n        })\n        \n    }, [data]);\n\n    let cou = 0;\n\n    useEffect(()=>{\n        console.log(tablerows);\n        setHolder(tablerows);\n        return(tablerows);\n    }, [counter])\n\n    return(\n        <React.Fragment>\n            <div className='selection' style={selectionStyle}>\n                <p>Select X Value</p>\n                <select id='x-cat'>Select X Value</select>&nbsp;&nbsp;\n                <p>Select Y Value</p>\n                <select id= 'y-cat'>Select Y Value</select>&nbsp;&nbsp;\n                <p>Select Color Code</p>\n                <select id= 'color-cat'></select>\n            </div>\n            <div id = 'chartArea' style={chartStyle}>\n                <svg ref = {svgRef}>\n                    <g id ='x-axis'></g>\n                    <g id = 'y-axis'></g>\n                </svg>\n            </div>\n            {tablerows && tablerows.length > 0?(\n            <Table data={tablerows} num={holder}></Table>\n            ):(<h1>Select dots</h1>)}\n            \n        </React.Fragment>\n    )\n}\nexport default Scatterplot;\n"]},"metadata":{},"sourceType":"module"}