{"ast":null,"code":"var _jsxFileName = \"/home/Panda21/Documents/Emory/2021 - 2022/CS 485/m5-final-deliverables-wii-design/src/components/scatterplot.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from \"react\";\nimport * as d3 from 'd3';\nimport { legendColor } from \"d3-svg-legend\";\nimport './scatterplot.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Scatterplot = dataSet => {\n  _s();\n\n  const svgRef = useRef();\n  const [data, setData] = useState([]);\n  const list = new Array();\n  const cat = useRef('Critic Score');\n  const num = useRef('North America Sales');\n  const col = useRef('Genres');\n  const optX = [{\n    value: 'Critic Score',\n    label: 'Critic Score'\n  }, {\n    value: 'User Score',\n    label: 'User Score'\n  }, {\n    value: 'Global Sales',\n    label: 'Global Sales'\n  }, {\n    value: 'North America Sales',\n    label: 'North America Sales'\n  }, {\n    value: 'Average Play Length_All PlayStyles',\n    label: 'Average All Playstyles Play Time'\n  }, {\n    value: 'Average Play Length_Leisure',\n    label: 'Average Leisure Play Time'\n  }];\n  const optY = [{\n    value: 'North America Sales',\n    label: 'North America Sales'\n  }, {\n    value: 'Average Play Length_All PlayStyles',\n    label: 'Average All Playstyles Play Time'\n  }, {\n    value: 'Average Play Length_Leisure',\n    label: 'Average Leisure Play Time'\n  }, {\n    value: 'Critic Score',\n    label: 'Critic Score'\n  }, {\n    value: 'User Score',\n    label: 'User Score'\n  }, {\n    value: 'Global Sales',\n    label: 'Global Sales'\n  }];\n  const optColor = [{\n    value: 'Genres',\n    label: 'Genres'\n  }, {\n    value: 'Platform',\n    label: 'Platform'\n  }, {\n    value: 'Developer',\n    label: 'Developer'\n  }, {\n    value: 'Rating',\n    label: 'Rating'\n  }];\n  const selectionStyle = {\n    display: 'flex',\n    margin: '20px'\n  };\n  const chartStyle = {\n    overflow: 'auto',\n    height: '500px',\n    width: '800px',\n    display: 'flex'\n  };\n  const tableStyle = {\n    align: 'center',\n    display: 'flex',\n    padding: '20px',\n    margin: '20px'\n  };\n  useEffect(() => {\n    d3.csv(\"/data/clean_data.csv\").then(da => {\n      var list1 = dataSet.dataSet.map(game => {\n        return game.row;\n      });\n      setData(list1);\n    });\n  }, [dataSet.dataSet]);\n  useEffect(() => {\n    d3.selectAll('circle').remove();\n    d3.selectAll('#legendArea').remove();\n    d3.selectAll('text').remove();\n    d3.selectAll('text').remove();\n    d3.select('#x-cat').selectAll('option').remove();\n    d3.select('#y-cat').selectAll('option').remove();\n    d3.select('#color-cat').selectAll('option').remove();\n    cat.current = 'Critic Score';\n    num.current = 'North America Sales';\n    col.current = 'Genres';\n    let labelX = '';\n    let labelY = ''; //set up color\n\n    const color = d3.scaleOrdinal().domain(data.map(function (d) {\n      return d[col.current];\n    })).range(d3.schemeCategory10); //set up container\n\n    const w = 800;\n    const h = 400;\n    const margin = {\n      top: 20,\n      right: 20,\n      bottom: 30,\n      left: 40\n    };\n    const svg = d3.select(svgRef.current).attr('width', w).attr('height', h).style('overflow', 'visible').style('margin-top', '10px').style('margin-bottom', '50px').style('position', 'absolute').style('left', '100px').append('g'); //set options\n\n    d3.select('#x-cat').selectAll('option').data(optX).join('option').text(function (d) {\n      return d.label;\n    }).attr('value', function (d) {\n      return d.value;\n    }).attr('label', function (d) {\n      return d.label;\n    });\n    d3.select('#y-cat').selectAll('option').data(optY).join('option').text(function (d) {\n      return d.label;\n    }).attr('value', function (d) {\n      return d.value;\n    }).attr('label', function (d) {\n      return d.label;\n    });\n    d3.select('#color-cat').selectAll('option').data(optColor).join('option').text(function (d) {\n      return d.label;\n    }).attr('value', function (d) {\n      return d.value;\n    }).attr('label', function (d) {\n      return d.label;\n    }); //setting scales\n\n    const yScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n      return d[num.current];\n    })]).range([h, 0]);\n    const xScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n      return d[cat.current];\n    })]).range([0, w]); //set up legend\n\n    const legend = legendColor().shapeWidth(20).shapeHeight(5).scale(color);\n    d3.selectAll('#chartArea').append('div').attr('id', 'legendArea').style('height', '400px').style('width', '500px').style('position', 'absolute').style('left', '930px').style('overflow-y', 'scroll').append('svg').attr('id', 'legend').attr('height', '120vh').attr('width', '100vh').style('overflow', 'scroll').style('display', 'flex').call(legend); //set up zoom\n\n    const zoom = d3.zoom().on('zoom', zoomed); // rescaling\n\n    function zoomed(e) {\n      const newY = e.transform.rescaleY(yScale);\n      const newX = e.transform.rescaleX(xScale);\n      xAxis.call(d3.axisBottom(newX));\n      yAxis.call(d3.axisLeft(newY));\n      circle.selectAll('circle').attr('cy', function (d) {\n        return newY(d[num.current]);\n      }).attr('cx', function (d) {\n        return newX(d[cat.current]);\n      });\n    } //clipPath - nothing draw outside the area\n\n\n    svg.append('defs').append('svg:clipPath').attr(\"id\", \"clip\").append('svg:rect').attr('width', w).attr('height', h).attr('x', 0).attr('y', 0); //invisible rect on top of the chart to recover pointer events\n\n    svg.append('rect').attr('width', w).attr('height', h).style('fill', 'none').style('pointer-events', 'all').call(zoom); //set up axes\n\n    const xAxis = d3.select('#x-axis').attr('transform', `translate(0, ${h})`).call(d3.axisBottom(xScale));\n    const yAxis = d3.select('#y-axis') //.attr('transform', `translate(0, ${w})`)\n    .call(d3.axisLeft(yScale)); //set label\n\n    svg.append('text').attr('id', 'x-label').attr('x', w / 2).attr('y', h + 50).text('Critic Score');\n    svg.append('text').attr('id', 'y-label').attr('y', h - 450).attr('x', -320).attr(\"transform\", \"rotate(270)\").text('North America Sales'); //set up tooltip\n\n    const tooldiv = d3.select('#chartArea').append('div').style('visibility', 'hidden').style('position', 'absolute').style('background-color', '#ccc').style('padding', '10px').style('border-radius', '5px').style('color', 'black'); //setting up data\n\n    const circle = svg.append('g').attr(\"clip-path\", 'url(#clip)');\n    circle.selectAll('circle').data(data).join('circle').attr('cx', d => xScale(d[cat.current])).attr('cy', d => yScale(d[num.current])).attr('r', 5).attr('fill', d => color(d[col.current])).on('mouseover', (e, d) => {\n      d3.select(e.currentTarget).attr('r', 5 * 2).attr('fill', 'orange');\n      tooldiv.style('visibility', 'visible').text(`${d['Title']}`);\n    }).on('mousemove', (e, d) => {\n      tooldiv.style('top', e.pageY - 50 + 'px').style('left', e.pageX - 50 + 'px');\n    }).on('mouseout', (e, d) => {\n      d3.select(e.currentTarget).attr('r', 5).attr('fill', '#ff00ad');\n      tooldiv.style('visibility', 'hidden');\n    }).on('click', (e, d) => {\n      list.push(d);\n      var rows = tbody.selectAll(\"tr\").data(list).join('tr');\n      var cells = rows.selectAll('td').data(function (cell) {\n        return columns.map(function (game) {\n          return {\n            column: game,\n            value: cell[game]\n          };\n        });\n      }).enter().append('td').text(function (d) {\n        return d.value;\n      });\n    }); //update option\n\n    function updateX(selectedGroup) {\n      cat.current = selectedGroup;\n      console.log(cat.current + ' ' + num.current);\n      const newXScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n        return d[cat.current];\n      })]).range([0, w]);\n      const newYScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n        return d[num.current];\n      })]).range([h, 0]);\n      d3.select('#x-axis') //.attr('transform', `translate(0, ${h})`)\n      .call(d3.axisBottom(newXScale));\n      d3.select('#y-axis') //.attr('transform', `translate(0, ${w})`)\n      .call(d3.axisLeft().scale(yScale)); //set up zoom\n\n      const zoom = d3.zoom().on('zoom', zoomed);\n\n      function zoomed(e) {\n        const newY = e.transform.rescaleY(newYScale);\n        const newX = e.transform.rescaleX(newXScale);\n        xAxis.call(d3.axisBottom(newX));\n        yAxis.call(d3.axisLeft(newY));\n        circle.selectAll('circle').attr('cy', function (d) {\n          return newY(d[num.current]);\n        }).attr('cx', function (d) {\n          return newX(d[selectedGroup]);\n        });\n      }\n\n      svg.selectAll('rect').call(zoom);\n      circle.selectAll('circle').on('mouseover', (e, d) => {\n        if (selectedGroup !== 'Title') {\n          d3.select(e.currentTarget).attr('r', 5 * 2).attr('fill', 'orange');\n          tooldiv.style('visibility', 'visible').text(`Title: ${d['Title']}  ${labelX}: ${d[selectedGroup]} ${labelY}: ${d[num.current]}`);\n        } else {\n          d3.select(e.currentTarget).attr('r', 5 * 2).attr('fill', 'orange');\n          tooldiv.style('visibility', 'visible').text(`${d['Title']}`);\n        }\n      }).transition().duration(1000).attr('fill', d => color(d['Genres'])).attr('cx', function (d) {\n        return newXScale(d[selectedGroup]);\n      }).attr('cy', function (d) {\n        return newYScale(d[num.current]);\n      });\n    }\n\n    d3.select('#x-cat').on('change', function (e, d) {\n      const selectedOpt = d3.select(this).property('value');\n      labelX = e.target.selectedOptions[0].getAttribute('label');\n      d3.selectAll('#x-label').text(labelX);\n      updateX(selectedOpt);\n    });\n\n    function updateY(selectedGroup) {\n      num.current = selectedGroup;\n      console.log(cat.current + ' ' + num.current);\n      const newXScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n        return d[cat.current];\n      })]).range([0, w]);\n      const newYScale = d3.scaleLinear().domain([0, d3.max(data, function (d) {\n        return d[selectedGroup];\n      })]).range([h, 0]);\n      d3.select('#y-axis').call(d3.axisLeft(newYScale));\n      d3.select('#x-axis').call(d3.axisBottom(newXScale)); //set up zoom\n\n      const zoom = d3.zoom().on('zoom', zoomed);\n\n      function zoomed(e) {\n        const newY = e.transform.rescaleY(newYScale);\n        const newX = e.transform.rescaleX(newXScale);\n        xAxis.call(d3.axisBottom(newX));\n        yAxis.call(d3.axisLeft(newY));\n        circle.selectAll('circle').attr('cy', function (d) {\n          return newY(d[selectedGroup]);\n        }).attr('cx', function (d) {\n          return newX(d[cat.current]);\n        });\n      }\n\n      svg.selectAll('rect').call(zoom);\n      circle.selectAll('circle').transition().duration(1000).attr('cy', d => newYScale(d[selectedGroup])).attr('cx', function (d) {\n        return newXScale(d[cat.current]);\n      }).attr('fill', d => color(d['Genres']));\n    }\n\n    d3.select('#y-cat').on('change', function (e, d) {\n      const selectedOpt = d3.select(this).property('value');\n      labelY = e.target.selectedOptions[0].getAttribute('label');\n      d3.selectAll('#y-label').text(labelY);\n      updateY(selectedOpt);\n    });\n\n    function updateColor(selectedGroup) {\n      col.current = selectedGroup;\n      const color = d3.scaleOrdinal().domain(data.map(function (d) {\n        return d[selectedGroup];\n      })).range(d3.schemeCategory10);\n      const legend = legendColor().shapeWidth(20).shapeHeight(5).scale(color);\n      d3.selectAll('#legendArea').remove();\n\n      if (selectedGroup === 'Rating') {\n        d3.selectAll('#chartArea').append('div').attr('id', 'legendArea').style('height', '400px').style('width', '500px').style('position', 'absolute').style('left', '930px').style('overflow-y', 'scroll').append('svg').attr('id', 'legend').style('overflow', 'scroll').style('display', 'flex').call(legend);\n      } else if (selectedGroup === 'Platform') {\n        d3.selectAll('#chartArea').append('div').attr('id', 'legendArea').style('height', '400px').style('width', '500px').style('position', 'absolute').style('left', '930px').style('overflow-y', 'scroll').append('svg').attr('id', 'legend').style('overflow', 'scroll').style('display', 'flex').call(legend);\n      } else if (selectedGroup === 'Developer') {\n        d3.selectAll('#chartArea').append('div').attr('id', 'legendArea').style('height', '400px').style('width', '500px').style('position', 'absolute').style('left', '930px').style('overflow-y', 'scroll').append('svg').attr('id', 'legend').attr('height', '90vh').style('overflow', 'scroll').style('display', 'flex').call(legend);\n      } else {\n        d3.selectAll('#chartArea').append('div').attr('id', 'legendArea').style('height', '400px').style('width', '500px').style('position', 'absolute').style('left', '930px').style('overflow-y', 'scroll').append('svg').attr('id', 'legend').attr('height', '120vh').attr('width', '100vh').style('overflow', 'scroll').style('display', 'flex').call(legend);\n      }\n\n      circle.selectAll('circle').attr('fill', d => color(d[selectedGroup]));\n    }\n\n    d3.select('#color-cat').on('change', function (e, d) {\n      const selectedOpt = d3.select(this).property('value');\n      updateColor(selectedOpt);\n    });\n    d3.selectAll('table').remove();\n    var table = d3.select(\"#tableArea\").append(\"table\");\n    var thead = table.append(\"thead\");\n    var tbody = table.append(\"tbody\");\n    const columns = ['Title', 'Year', 'Platform', 'Critic Score', 'User Score', 'Developer', 'Genres', 'Rating'];\n    thead.append(\"tr\").selectAll(\"th\").data(columns).join(\"th\").text(function (d) {\n      return d;\n    });\n  }, [data]);\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"selection\",\n      style: selectionStyle,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Select X Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 530,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"x-cat\",\n        children: \"Select X Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 17\n      }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Select Y Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"y-cat\",\n        children: \"Select Y Value\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 17\n      }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Select Color Code\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 534,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"color-cat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 535,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 529,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"chartArea\",\n      style: chartStyle,\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        ref: svgRef,\n        children: [/*#__PURE__*/_jsxDEV(\"g\", {\n          id: \"x-axis\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 539,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"g\", {\n          id: \"y-axis\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 538,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 537,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"tableArea\",\n      style: tableStyle\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 543,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 528,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Scatterplot, \"kzQ4b3tsEsfNQFOU9NzmNBTE3Xk=\");\n\n_c = Scatterplot;\nexport default Scatterplot;\n\nvar _c;\n\n$RefreshReg$(_c, \"Scatterplot\");","map":{"version":3,"sources":["/home/Panda21/Documents/Emory/2021 - 2022/CS 485/m5-final-deliverables-wii-design/src/components/scatterplot.js"],"names":["React","useRef","useEffect","useState","d3","legendColor","Scatterplot","dataSet","svgRef","data","setData","list","Array","cat","num","col","optX","value","label","optY","optColor","selectionStyle","display","margin","chartStyle","overflow","height","width","tableStyle","align","padding","csv","then","da","list1","map","game","row","selectAll","remove","select","current","labelX","labelY","color","scaleOrdinal","domain","d","range","schemeCategory10","w","h","top","right","bottom","left","svg","attr","style","append","join","text","yScale","scaleLinear","max","xScale","legend","shapeWidth","shapeHeight","scale","call","zoom","on","zoomed","e","newY","transform","rescaleY","newX","rescaleX","xAxis","axisBottom","yAxis","axisLeft","circle","tooldiv","currentTarget","pageY","pageX","push","rows","tbody","cells","cell","columns","column","enter","updateX","selectedGroup","console","log","newXScale","newYScale","transition","duration","selectedOpt","property","target","selectedOptions","getAttribute","updateY","updateColor","table","thead"],"mappings":"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","sourcesContent":["import React, {useRef, useEffect, useState} from \"react\";\nimport * as d3 from 'd3';\nimport {legendColor }from \"d3-svg-legend\";\nimport './scatterplot.css'\n\n\nconst Scatterplot = (dataSet) => {\n\n    const svgRef = useRef();\n    const [data, setData] = useState([]);\n    const list = new Array();\n    const cat = useRef('Critic Score');\n    const num = useRef('North America Sales')\n    const col = useRef('Genres')\n\n    const optX = [\n        {value: 'Critic Score', label: 'Critic Score'},\n        {value: 'User Score', label: 'User Score'},\n        {value: 'Global Sales', label: 'Global Sales'},\n        {value: 'North America Sales', label: 'North America Sales'},\n        {value: 'Average Play Length_All PlayStyles', label: 'Average All Playstyles Play Time'},\n        {value: 'Average Play Length_Leisure', label: 'Average Leisure Play Time'}\n    ]\n\n    const optY = [\n        {value: 'North America Sales', label: 'North America Sales'},\n        {value: 'Average Play Length_All PlayStyles', label: 'Average All Playstyles Play Time'},\n        {value: 'Average Play Length_Leisure', label: 'Average Leisure Play Time'},\n        {value: 'Critic Score', label: 'Critic Score'},\n        {value: 'User Score', label: 'User Score'},\n        {value: 'Global Sales', label: 'Global Sales'}\n    ]\n\n    const optColor = [\n        {value: 'Genres', label: 'Genres'},\n        {value: 'Platform', label:'Platform'},\n        {value: 'Developer', label:'Developer'},\n        {value: 'Rating', label: 'Rating'}\n    ]\n\n    const selectionStyle = {\n        display: 'flex',\n        margin: '20px'\n    }\n\n    const chartStyle = {\n        overflow: 'auto',\n        height: '500px',\n        width: '800px',\n        display:'flex',\n    }\n    const tableStyle = {\n        align: 'center',\n        display: 'flex',\n        padding: '20px',\n        margin: '20px'\n     }\n\n    useEffect(()=> {\n        d3.csv(\"/data/clean_data.csv\")\n            .then((da) =>{\n                var list1 = dataSet.dataSet.map((game)=>{\n                    return game.row;\n                })\n                setData(list1);\n        })\n    }, [dataSet.dataSet]);\n\n    useEffect(() => {\n\n        d3.selectAll('circle').remove()\n        d3.selectAll('#legendArea').remove()\n        d3.selectAll('text').remove()\n        d3.selectAll('text').remove()\n        d3.select('#x-cat').selectAll('option').remove()\n        d3.select('#y-cat').selectAll('option').remove()\n        d3.select('#color-cat').selectAll('option').remove()\n\n        cat.current = 'Critic Score';\n        num.current = 'North America Sales'\n        col.current = 'Genres'\n\n        let labelX = '';\n        let labelY = '';\n        //set up color\n        const color = d3.scaleOrdinal()\n            .domain(data.map(function(d) {return d[col.current]}))\n            .range(d3.schemeCategory10)\n\n        //set up container\n        const w = 800;\n        const h = 400;\n        const margin = {top:20, right:20, bottom:30, left:40};\n        const svg = d3.select(svgRef.current)\n            .attr('width', w)\n            .attr('height', h)\n            .style('overflow', 'visible')\n            .style('margin-top', '10px')\n            .style('margin-bottom', '50px')\n            .style('position', 'absolute')\n            .style('left', '100px')\n            .append('g')\n\n        //set options\n        d3.select('#x-cat')\n            .selectAll('option')\n                .data(optX)\n            .join('option')\n            .text(function(d){return d.label})\n            .attr('value', function(d){return d.value})\n            .attr('label', function(d){return d.label})\n\n        d3.select('#y-cat')\n            .selectAll('option')\n                .data(optY)\n            .join('option')\n            .text(function(d){return d.label})\n            .attr('value', function(d){return d.value})\n            .attr('label', function(d){return d.label})\n\n        d3.select('#color-cat')\n            .selectAll('option')\n                .data(optColor)\n            .join('option')\n            .text(function(d){return d.label})\n            .attr('value', function(d){return d.value})\n            .attr('label', function(d){return d.label})\n\n            //setting scales\n            const yScale = d3.scaleLinear()\n                .domain([0, d3.max(data, function(d) {return d[num.current]})])\n                .range([h,0]);\n\n            const xScale = d3.scaleLinear()\n                .domain([0, d3.max(data,function(d) {return d[cat.current]})])\n                .range([0,w])\n\n\n            //set up legend\n            const legend = legendColor()\n                .shapeWidth(20)\n                .shapeHeight(5)\n                .scale(color)\n\n            d3.selectAll('#chartArea')\n                .append('div')\n                .attr('id','legendArea')\n                .style('height', '400px')\n                .style('width', '500px')\n                .style('position', 'absolute')\n                .style('left', '930px')\n                .style('overflow-y', 'scroll')\n                .append('svg')\n                .attr('id', 'legend')\n                .attr('height', '120vh')\n                .attr('width', '100vh')\n                .style('overflow', 'scroll')\n                .style('display', 'flex')\n                .call(legend)\n\n            //set up zoom\n            const zoom = d3.zoom()\n                .on('zoom', zoomed);\n\n            // rescaling\n            function zoomed(e) {\n                const newY = e.transform.rescaleY(yScale)\n                const newX = e.transform.rescaleX(xScale)\n\n                xAxis.call(d3.axisBottom(newX))\n                yAxis.call(d3.axisLeft(newY))\n\n                circle\n                    .selectAll('circle')\n                    .attr('cy', function(d) {return newY(d[num.current])})\n                    .attr('cx', function(d) {return newX(d[cat.current])})\n            }\n    \n        \n            //clipPath - nothing draw outside the area\n\n            svg.append('defs').append('svg:clipPath')\n                .attr(\"id\", \"clip\")\n                .append('svg:rect')\n                .attr('width', w)\n                .attr('height',h)\n                .attr('x', 0)\n                .attr('y',0)\n\n            //invisible rect on top of the chart to recover pointer events\n            svg.append('rect')\n                .attr('width', w)\n                .attr('height',h)\n                .style('fill', 'none')\n                .style('pointer-events', 'all')\n                .call(zoom)\n\n\n            //set up axes\n            const xAxis = d3.select('#x-axis')\n                .attr('transform', `translate(0, ${h})`)\n                .call(d3.axisBottom(xScale))\n            \n            const yAxis = d3.select('#y-axis')\n                //.attr('transform', `translate(0, ${w})`)\n                .call(d3.axisLeft(yScale))\n\n            //set label\n            svg.append('text')\n                .attr('id','x-label')\n                .attr('x', w/2)\n                .attr('y', h+50)\n                .text('Critic Score')\n            \n            svg.append('text')\n                .attr('id', 'y-label')\n                .attr('y', h-450)\n                .attr('x', -320)\n                .attr(\"transform\", \"rotate(270)\")\n                .text('North America Sales')\n\n            //set up tooltip\n            const tooldiv = d3.select('#chartArea')\n                .append('div')\n                .style('visibility', 'hidden')\n                .style('position', 'absolute')\n                .style('background-color', '#ccc')\n                .style('padding', '10px')\n                .style('border-radius', '5px')\n                .style('color', 'black')\n\n            //setting up data\n            const circle = svg.append('g')\n            .attr(\"clip-path\", 'url(#clip)')\n            \n            circle\n                .selectAll('circle')\n                .data(data)\n                .join('circle')\n                    .attr('cx', d => xScale(d[cat.current]))\n                    .attr('cy', d => yScale(d[num.current]))\n                    .attr('r',5)\n                    .attr('fill', d=>color(d[col.current]))\n                    .on('mouseover',(e,d) => {\n                        d3.select(e.currentTarget)\n                            .attr('r', 5*2)\n                            .attr('fill', 'orange')\n                        tooldiv.style('visibility','visible')\n                            .text(`${d['Title']}`)\n                    })\n                    .on('mousemove', (e,d)=>{\n                        tooldiv.style('top', (e.pageY-50) + 'px')\n                            .style('left', (e.pageX-50)+ 'px')\n                    })\n                    .on('mouseout', (e,d) => {\n                        d3.select(e.currentTarget)\n                            .attr('r', 5)\n                            .attr('fill', '#ff00ad')\n                        tooldiv.style('visibility','hidden')\n                    })\n                    .on('click', (e,d)=>{\n                        list.push(d)\n                        var rows = tbody.selectAll(\"tr\")\n                            .data(list)\n                            .join('tr')\n\n                        var cells = rows.selectAll('td')\n                            .data(function(cell) {\n                                return columns.map(function(game) {\n                                    return {\n                                        column: game,\n                                        value: cell[game]\n                                    }\n                                })\n                            }).enter()\n                            .append('td')\n                            .text(function(d) {\n                                return d.value;\n                            });\n                    })\n        \n        //update option\n        function updateX(selectedGroup) {\n            cat.current = selectedGroup\n            console.log(cat.current + ' ' + num.current)\n\n            const newXScale = d3.scaleLinear()\n                .domain([0, d3.max(data,function(d) {return d[cat.current]})])\n                .range([0,w])\n\n            const newYScale = d3.scaleLinear()\n                .domain([0, d3.max(data, function(d) {return d[num.current]})])\n                .range([h,0])\n\n            d3.select('#x-axis')\n                //.attr('transform', `translate(0, ${h})`)\n                .call(d3.axisBottom(newXScale))\n\n            d3.select('#y-axis')\n                //.attr('transform', `translate(0, ${w})`)\n                .call(d3.axisLeft().scale(yScale))\n\n            //set up zoom\n            const zoom = d3.zoom()\n            .on('zoom', zoomed);\n\n            function zoomed(e){\n                const newY = e.transform.rescaleY(newYScale)\n                const newX = e.transform.rescaleX(newXScale)\n\n                xAxis.call(d3.axisBottom(newX))\n                yAxis.call(d3.axisLeft(newY))\n\n                circle\n                    .selectAll('circle')\n                    .attr('cy', function(d) {return newY(d[num.current])})\n                    .attr('cx', function(d) {return newX(d[selectedGroup])})\n            }\n\n            svg.selectAll('rect')\n                .call(zoom)\n\n            circle\n                .selectAll('circle')\n                    .on('mouseover',(e,d) => {\n                        if(selectedGroup !== 'Title') {\n                            d3.select(e.currentTarget)\n                            .attr('r', 5*2)\n                            .attr('fill', 'orange')\n\n                            tooldiv.style('visibility','visible')\n                            .text(`Title: ${d['Title']}  ${labelX}: ${d[selectedGroup]} ${labelY}: ${d[num.current]}`)\n                        }\n                        else {\n                            d3.select(e.currentTarget)\n                            .attr('r', 5*2)\n                            .attr('fill', 'orange')\n\n                            tooldiv.style('visibility','visible')\n                            .text(`${d['Title']}`)\n                        }\n\n                    })\n                .transition()\n                .duration(1000)\n                .attr('fill', d=>color(d['Genres']))\n                .attr('cx', function(d){return newXScale(d[selectedGroup])})    \n                .attr('cy', function(d){return newYScale(d[num.current])})\n            \n        }\n\n        d3.select('#x-cat').on('change', function(e,d) {\n            const selectedOpt = d3.select(this).property('value')\n            labelX = e.target.selectedOptions[0].getAttribute('label')\n            d3.selectAll('#x-label').text(labelX)\n            updateX(selectedOpt);\n        })\n\n        function updateY(selectedGroup) {\n            num.current = selectedGroup\n            console.log(cat.current + ' ' + num.current)\n\n            const newXScale = d3.scaleLinear()\n                .domain([0, d3.max(data,function(d) {return d[cat.current]})])\n                .range([0,w])\n\n            const newYScale = d3.scaleLinear()\n                .domain([0, d3.max(data,function(d){return d[selectedGroup]})])\n                .range([h,0])\n\n            d3.select('#y-axis')\n                .call(d3.axisLeft(newYScale))\n\n            d3.select('#x-axis')\n                .call(d3.axisBottom(newXScale))\n\n                //set up zoom\n            const zoom = d3.zoom()\n            .on('zoom', zoomed);\n\n            function zoomed(e){\n                const newY = e.transform.rescaleY(newYScale)\n                const newX = e.transform.rescaleX(newXScale)\n\n                xAxis.call(d3.axisBottom(newX))\n                yAxis.call(d3.axisLeft(newY))\n\n                circle\n                    .selectAll('circle')\n                    .attr('cy', function(d) {return newY(d[selectedGroup])})\n                    .attr('cx', function(d) {return newX(d[cat.current])})\n            }\n\n            svg.selectAll('rect')\n                .call(zoom)\n\n            circle\n                .selectAll('circle')\n                .transition()\n                .duration(1000)\n                .attr('cy', d=> newYScale(d[selectedGroup]))\n                .attr('cx', function(d){return newXScale(d[cat.current])})\n                .attr('fill', d=>color(d['Genres']))\n            \n        }\n        d3.select('#y-cat').on('change', function(e,d) {\n            const selectedOpt = d3.select(this).property('value');\n            labelY = e.target.selectedOptions[0].getAttribute('label')\n            d3.selectAll('#y-label').text(labelY);\n            updateY(selectedOpt);\n        })\n        function updateColor(selectedGroup) {\n\n            col.current = selectedGroup;\n\n            const color = d3.scaleOrdinal()\n                .domain(data.map(function(d) {return d[selectedGroup]}))\n                .range(d3.schemeCategory10)\n\n                const legend = legendColor()\n                .shapeWidth(20)\n                .shapeHeight(5)\n                .scale(color)\n\n            d3.selectAll('#legendArea').remove()\n            \n            if(selectedGroup === 'Rating') {\n                d3.selectAll('#chartArea')\n                .append('div')\n                .attr('id','legendArea')\n                .style('height', '400px')\n                .style('width', '500px')\n                .style('position', 'absolute')\n                .style('left', '930px')\n                .style('overflow-y', 'scroll')\n                .append('svg')\n                .attr('id', 'legend')\n                .style('overflow', 'scroll')\n                .style('display', 'flex')\n                .call(legend)\n            }\n            else if (selectedGroup === 'Platform') {\n                d3.selectAll('#chartArea')\n                .append('div')\n                .attr('id','legendArea')\n                .style('height', '400px')\n                .style('width', '500px')\n                .style('position', 'absolute')\n                .style('left', '930px')\n                .style('overflow-y', 'scroll')\n                .append('svg')\n                .attr('id', 'legend')\n                .style('overflow', 'scroll')\n                .style('display', 'flex')\n                .call(legend)\n            }\n            else if(selectedGroup === 'Developer') {\n                d3.selectAll('#chartArea')\n                .append('div')\n                .attr('id','legendArea')\n                .style('height', '400px')\n                .style('width', '500px')\n                .style('position', 'absolute')\n                .style('left', '930px')\n                .style('overflow-y', 'scroll')\n                .append('svg')\n                .attr('id', 'legend')\n                .attr('height', '90vh')\n                .style('overflow', 'scroll')\n                .style('display', 'flex')\n                .call(legend)\n            }\n            else {\n            d3.selectAll('#chartArea')\n                .append('div')\n                .attr('id','legendArea')\n                .style('height', '400px')\n                .style('width', '500px')\n                .style('position', 'absolute')\n                .style('left', '930px')\n                .style('overflow-y', 'scroll')\n                .append('svg')\n                .attr('id', 'legend')\n                .attr('height', '120vh')\n                .attr('width', '100vh')\n                .style('overflow', 'scroll')\n                .style('display', 'flex')\n                .call(legend)\n            }\n\n            circle\n                .selectAll('circle')\n                .attr('fill', d => color(d[selectedGroup]))\n        }\n\n        d3.select('#color-cat').on('change', function(e,d) {\n            const selectedOpt = d3.select(this).property('value')\n            updateColor(selectedOpt);\n        })\n\n        d3.selectAll('table').remove()\n        var table = d3.select(\"#tableArea\").append(\"table\")\n        var thead = table.append(\"thead\")\n        var tbody = table.append(\"tbody\")\n\n        const columns = [\n            'Title',\n            'Year',\n            'Platform',\n            'Critic Score',\n            'User Score',\n            'Developer',\n            'Genres',\n            'Rating'\n         ]\n\n        thead.append(\"tr\")\n            .selectAll(\"th\")\n            .data(columns)\n            .join(\"th\")\n            .text(function(d) {\n                return d;\n            })\n   \n    }, [data]);\n\n    return(\n        <React.Fragment>\n            <div className='selection' style={selectionStyle}>\n                <p>Select X Value</p>\n                <select id='x-cat'>Select X Value</select>&nbsp;&nbsp;\n                <p>Select Y Value</p>\n                <select id= 'y-cat'>Select Y Value</select>&nbsp;&nbsp;\n                <p>Select Color Code</p>\n                <select id= 'color-cat'></select>\n            </div>\n            <div id = 'chartArea' style={chartStyle}>\n                <svg ref = {svgRef}>\n                    <g id ='x-axis'></g>\n                    <g id = 'y-axis'></g>\n                </svg>\n            </div>\n            <div id = 'tableArea' style={tableStyle}></div>\n\n            \n        </React.Fragment>\n    )\n}\n\nexport default Scatterplot;\n"]},"metadata":{},"sourceType":"module"}