{"ast":null,"code":"import _slicedToArray from\"/home/Panda21/Documents/Emory/2021 - 2022/CS 485/m5-final-deliverables-wii-design/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import*as d3 from'd3';import Scatterplot from'./scatterplot';import'./Search.css';import'font-awesome/css/font-awesome.min.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SearchSelect(props){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),selected=_useState2[0],setGame=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),data=_useState6[0],setData=_useState6[1];var handleChange=function handleChange(e){console.log(\"Game Selected: \"+e.target.value);setGame(e.target.value);};useEffect(function(){d3.csv(\"%PUBLIC_URL%/data/clean_data.csv\").then(function(da){setData(da);});},[]);var _useState7=useState(data),_useState8=_slicedToArray(_useState7,2),short=_useState8[0],setShort=_useState8[1];var _useState9=useState(data),_useState10=_slicedToArray(_useState9,2),dataSet=_useState10[0],setDataSet=_useState10[1];var _useState11=useState(data),_useState12=_slicedToArray(_useState11,2),foundGames=_useState12[0],setFoundGames=_useState12[1];var filter=function filter(e){var keyword=e.target.value;var placeholder={id:999999,Title:\"Select an option\",Platform:\"\",Year:\"\"};if(keyword!==''){var results=data.filter(function(game){return game.Title.toLowerCase().startsWith(keyword.toLowerCase());});setFoundGames(results);if(foundGames.length>0){var li=foundGames.slice(0,10);li.splice(0,0,placeholder);setShort(li);}}else{setFoundGames(data);if(foundGames.length>0){var _li=foundGames.slice(0,10);_li.splice(0,0,placeholder);setShort(_li);}}setName(keyword);};useEffect(function(){d3.csv(\"%PUBLIC_URL%/data/clean_data.csv\").then(function(da){if(da[selected]){console.log(da[selected]);var columns=da.columns;var list=da.map(function(element){var count=0;columns.forEach(function(col){if(element[col]===da[selected][col]&&element[col]){count+=1;}});return{row:element,value:count};});list.sort(function(a,b){return a.value<b.value;});setDataSet(list.slice(0,100));console.log(dataSet);return dataSet;}});},[selected]);return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"search\",value:name,onChange:filter,className:\"input\",placeholder:\"\\uF002 Search for a Game\"}),/*#__PURE__*/_jsx(\"div\",{className:\"game-list\",children:/*#__PURE__*/_jsx(\"select\",{value:selected,onChange:handleChange,className:\"game-dropdown\",children:short&&short.length>0?short.map(function(game){return/*#__PURE__*/_jsxs(\"option\",{className:\"game\",value:game.id,children:[game.Title,\", \",game.Platform,\", \",game.Year]},game.id);}):/*#__PURE__*/_jsx(\"option\",{})})})]}),dataSet&&dataSet.length>0?/*#__PURE__*/_jsx(Scatterplot,{dataSet:dataSet}):/*#__PURE__*/_jsx(\"h1\",{children:\"Select a Game\"})]});}export default SearchSelect;","map":{"version":3,"sources":["/home/Panda21/Documents/Emory/2021 - 2022/CS 485/m5-final-deliverables-wii-design/src/components/Search.js"],"names":["React","useEffect","useState","d3","Scatterplot","SearchSelect","props","selected","setGame","name","setName","data","setData","handleChange","e","console","log","target","value","csv","then","da","short","setShort","dataSet","setDataSet","foundGames","setFoundGames","filter","keyword","placeholder","id","Title","Platform","Year","results","game","toLowerCase","startsWith","length","li","slice","splice","columns","list","map","element","count","forEach","col","row","sort","a","b"],"mappings":"oKAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAO,GAAKC,CAAAA,EAAZ,KAAoB,IAApB,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CACA,MAAO,cAAP,CACA,MAAO,uCAAP,C,wFAGI,QAASC,CAAAA,YAAT,CAAsBC,KAAtB,CAA6B,CAExB,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAKK,QAAL,eAAeC,OAAf,eACA,eAAwBN,QAAQ,CAAC,EAAD,CAAhC,yCAAOO,IAAP,eAAaC,OAAb,eACA,eAAwBR,QAAQ,CAAC,EAAD,CAAhC,yCAAOS,IAAP,eAAaC,OAAb,eAEA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,CAAD,CAAO,CACzBC,OAAO,CAACC,GAAR,CAAY,kBAAoBF,CAAC,CAACG,MAAF,CAASC,KAAzC,EACAV,OAAO,CAACM,CAAC,CAACG,MAAF,CAASC,KAAV,CAAP,CACF,CAHD,CAKAjB,SAAS,CAAC,UAAK,CACZE,EAAE,CAACgB,GAAH,CAAO,kCAAP,EACIC,IADJ,CACS,SAACC,EAAD,CAAO,CACVT,OAAO,CAACS,EAAD,CAAP,CACF,CAHJ,EAIF,CALQ,CAKN,EALM,CAAT,CAMA,eAA0BnB,QAAQ,CAACS,IAAD,CAAlC,yCAAOW,KAAP,eAAcC,QAAd,eACA,eAA8BrB,QAAQ,CAACS,IAAD,CAAtC,0CAAOa,OAAP,gBAAgBC,UAAhB,gBACA,gBAAoCvB,QAAQ,CAACS,IAAD,CAA5C,2CAAOe,UAAP,gBAAmBC,aAAnB,gBAGA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACd,CAAD,CAAO,CACnB,GAAMe,CAAAA,OAAO,CAAGf,CAAC,CAACG,MAAF,CAASC,KAAzB,CACA,GAAMY,CAAAA,WAAW,CAAG,CAACC,EAAE,CAAE,MAAL,CAAaC,KAAK,CAAC,kBAAnB,CAAuCC,QAAQ,CAAC,EAAhD,CAAoDC,IAAI,CAAC,EAAzD,CAApB,CACA,GAAGL,OAAO,GAAK,EAAf,CAAkB,CACf,GAAMM,CAAAA,OAAO,CAAGxB,IAAI,CAACiB,MAAL,CAAY,SAACQ,IAAD,CAAS,CAClC,MAAOA,CAAAA,IAAI,CAACJ,KAAL,CAAWK,WAAX,GAAyBC,UAAzB,CAAoCT,OAAO,CAACQ,WAAR,EAApC,CAAP,CACF,CAFe,CAAhB,CAGAV,aAAa,CAACQ,OAAD,CAAb,CACA,GAAGT,UAAU,CAACa,MAAX,CAAoB,CAAvB,CAAyB,CACtB,GAAMC,CAAAA,EAAE,CAAGd,UAAU,CAACe,KAAX,CAAiB,CAAjB,CAAmB,EAAnB,CAAX,CACAD,EAAE,CAACE,MAAH,CAAU,CAAV,CAAY,CAAZ,CAAcZ,WAAd,EACAP,QAAQ,CAACiB,EAAD,CAAR,CACF,CACH,CAVD,IAUK,CACFb,aAAa,CAAChB,IAAD,CAAb,CACA,GAAGe,UAAU,CAACa,MAAX,CAAoB,CAAvB,CAAyB,CACtB,GAAMC,CAAAA,GAAE,CAAGd,UAAU,CAACe,KAAX,CAAiB,CAAjB,CAAmB,EAAnB,CAAX,CACAD,GAAE,CAACE,MAAH,CAAU,CAAV,CAAY,CAAZ,CAAcZ,WAAd,EACAP,QAAQ,CAACiB,GAAD,CAAR,CACF,CACH,CACD9B,OAAO,CAACmB,OAAD,CAAP,CACF,CAtBD,CAwBA5B,SAAS,CAAC,UAAM,CACbE,EAAE,CAACgB,GAAH,CAAO,kCAAP,EACIC,IADJ,CACS,SAACC,EAAD,CAAQ,CACX,GAAGA,EAAE,CAACd,QAAD,CAAL,CAAgB,CACbQ,OAAO,CAACC,GAAR,CAAYK,EAAE,CAACd,QAAD,CAAd,EACH,GAAMoC,CAAAA,OAAO,CAAGtB,EAAE,CAACsB,OAAnB,CACA,GAAMC,CAAAA,IAAI,CAAGvB,EAAE,CAACwB,GAAH,CAAO,SAASC,OAAT,CAAiB,CAClC,GAAIC,CAAAA,KAAK,CAAG,CAAZ,CACAJ,OAAO,CAACK,OAAR,CAAgB,SAAAC,GAAG,CAAG,CACnB,GAAGH,OAAO,CAACG,GAAD,CAAP,GAAiB5B,EAAE,CAACd,QAAD,CAAF,CAAa0C,GAAb,CAAjB,EAAsCH,OAAO,CAACG,GAAD,CAAhD,CAAsD,CACnDF,KAAK,EAAI,CAAT,CACF,CACH,CAJD,EAKA,MAAM,CACHG,GAAG,CAAEJ,OADF,CAEH5B,KAAK,CAAE6B,KAFJ,CAAN,CAIF,CAXY,CAAb,CAYAH,IAAI,CAACO,IAAL,CAAU,SAACC,CAAD,CAAGC,CAAH,QACPD,CAAAA,CAAC,CAAClC,KAAF,CAAUmC,CAAC,CAACnC,KADL,EAAV,EAGAO,UAAU,CAACmB,IAAI,CAACH,KAAL,CAAW,CAAX,CAAc,GAAd,CAAD,CAAV,CACA1B,OAAO,CAACC,GAAR,CAAYQ,OAAZ,EACA,MAAOA,CAAAA,OAAP,CACC,CACH,CAxBJ,EAyBF,CA1BQ,CA0BP,CAACjB,QAAD,CA1BO,CAAT,CA4BA,mBACA,MAAC,KAAD,CAAO,QAAP,yBACG,aAAK,SAAS,CAAC,WAAf,wBACG,cACG,IAAI,CAAC,QADR,CAEG,KAAK,CAAEE,IAFV,CAGG,QAAQ,CAAEmB,MAHb,CAIG,SAAS,CAAC,OAJb,CAKG,WAAW,CAAC,0BALf,EADH,cAQG,YAAK,SAAS,CAAC,WAAf,uBACG,eAAQ,KAAK,CAAErB,QAAf,CAAyB,QAAQ,CAAEM,YAAnC,CAAiD,SAAS,CAAC,eAA3D,UACCS,KAAK,EAAIA,KAAK,CAACiB,MAAN,CAAe,CAAxB,CACEjB,KAAK,CAACuB,GAAN,CAAU,SAACT,IAAD,qBACP,gBAAsB,SAAS,CAAC,MAAhC,CAAuC,KAAK,CAAEA,IAAI,CAACL,EAAnD,WACIK,IAAI,CAACJ,KADT,MAEMI,IAAI,CAACH,QAFX,MAGMG,IAAI,CAACF,IAHX,GAAaE,IAAI,CAACL,EAAlB,CADO,EAAV,CADF,cASE,iBAVH,EADH,EARH,GADH,CAyBIP,OAAO,EAAIA,OAAO,CAACe,MAAR,CAAiB,CAA5B,cACD,KAAC,WAAD,EAAa,OAAO,CAAEf,OAAtB,EADC,cAGE,qCA5BN,GADA,CAiCL,CAEJ,cAAenB,CAAAA,YAAf","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport * as d3 from 'd3';\nimport Scatterplot from './scatterplot';\nimport './Search.css'\nimport 'font-awesome/css/font-awesome.min.css';\n\n\n    function SearchSelect(props) {\n         \n         let [selected, setGame] = useState(''); \n         const [name, setName] = useState('');\n         const [data, setData] = useState([]);\n\n         const handleChange = (e) => {\n            console.log(\"Game Selected: \" + e.target.value);\n            setGame(e.target.value);\n         };\n\n         useEffect(()=> {\n            d3.csv(\"%PUBLIC_URL%/data/clean_data.csv\")\n               .then((da) =>{\n                  setData(da);\n               })\n         }, []);\n         const [short, setShort] = useState(data);\n         const [dataSet, setDataSet] = useState(data);\n         const [foundGames, setFoundGames] = useState(data)\n\n         \n         const filter = (e) => {\n            const keyword = e.target.value;\n            const placeholder = {id: 999999, Title:\"Select an option\", Platform:\"\", Year:\"\"}\n            if(keyword !== ''){\n               const results = data.filter((game) =>{\n                  return game.Title.toLowerCase().startsWith(keyword.toLowerCase());\n               });\n               setFoundGames(results);\n               if(foundGames.length > 0){\n                  const li = foundGames.slice(0,10);\n                  li.splice(0,0,placeholder);\n                  setShort(li);\n               }\n            }else{\n               setFoundGames(data);\n               if(foundGames.length > 0){\n                  const li = foundGames.slice(0,10);\n                  li.splice(0,0,placeholder);\n                  setShort(li);\n               }\n            }\n            setName(keyword);\n         };\n \n         useEffect(() => {\n            d3.csv(\"%PUBLIC_URL%/data/clean_data.csv\")\n               .then((da) => {\n                  if(da[selected]){\n                     console.log(da[selected]);\n                  const columns = da.columns;\n                  const list = da.map(function(element){\n                     let count = 0;\n                     columns.forEach(col =>{\n                        if(element[col] === da[selected][col] && element[col]){\n                           count += 1;\n                        }\n                     })\n                     return{\n                        row: element,\n                        value: count\n                     }\n                  })\n                  list.sort((a,b)=>\n                     a.value < b.value\n                  )\n                  setDataSet(list.slice(0, 100));\n                  console.log(dataSet)\n                  return dataSet;\n                  }\n               })\n         },[selected]);\n\n         return (\n         <React.Fragment>\n            <div className=\"container\">\n               <input\n                  type=\"search\"\n                  value={name}\n                  onChange={filter}\n                  className=\"input\"\n                  placeholder=\"&#xf002; Search for a Game\"\n               />\n               <div className=\"game-list\">\n                  <select value={selected} onChange={handleChange} className=\"game-dropdown\">\n                  {short && short.length > 0 ?(\n                     short.map((game) => (\n                        <option key={game.id} className=\"game\" value={game.id}>\n                           {game.Title}\n                           , {game.Platform}\n                           , {game.Year}\n                        </option>\n                     ))\n                  ):(\n                     <option></option>\n                  )}\n                  </select>\n               </div>\n            </div>\n            {dataSet && dataSet.length > 0 ?(\n            <Scatterplot dataSet={dataSet}></Scatterplot>\n            ):(\n               <h1>Select a Game</h1>\n            )}\n         </React.Fragment>\n      );\n   }\n\nexport default SearchSelect;"]},"metadata":{},"sourceType":"module"}